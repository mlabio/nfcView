var Deployer = require('./');
var http     = require('http');

var port = 3334;

var path = '/version';

var deployer = new Deployer({ path : path, secret : 'testSecret' });

deployer.listen(port);

var req = http.request({
    hostname : 'localhost',
    port     : port,
    path     : path,
    method   : 'GET',
}, function(res) {

    console.log('STATUS: '  + res.statusCode);
    console.log('HEADERS: ' + JSON.stringify(res.headers));

    res.setEncoding('utf8');
    var responseString = '';

    res.on('data', function(chunk) {
        console.log('BODY: ' + chunk);
        responseString += chunk.toString();
    })

    res.on('end', function() {
        console.log(responseString);
    })

    res.on('error', function(error) {
        console.log('got an error');
        console.log(error);
    })

});

//req.write('hit');
req.end();

